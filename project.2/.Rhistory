time.means1
x <- c(1,1,1,1,1,2,2,2,2,2)
y <- c(1,1,1,1,1, 1,1,1,1,NA)
xy <- c(x,y)
xy
xy <- data.frame(x,y)
xy
x <- c(1,1,1,1,1,2,2,2,2,2)
y <- c(1,1,1,1,1, 1,1,1,1,NA)
xy <- data.frame(x,y)
xy
sum(xy[y=1])
sum(xy[y=1,])
sum(xy[y=1,]$y)
sum(xy[y=1,]$x)
sum(xy$y)
sum(xy$y, na.rm=TRUE)
mean(xy$y)
sum(xy[xy$y=1, ]$x)
sum(xy[xy$y==1, ]$x)
sum(xy[xy$y==1, ]$x, na.rm=TRUE)
length(xy)
length(xy$y)
data.re <- arrange(data, data$interval)
library(dplyr)
data.re <- arrange(data, data$interval)
data.re
head(data)
str(data)
arrange(data, data$steps)
?arrange
arrange(data, interval)
data.re <- arrange(data, inerval)
data.re <- arrange(data, interval)
tapply(data.re, data.re$interval, mean)
tapply(data.re$steps, data.re$interval, mean)
tapply(data.re$steps, data.re$interval, mean, na.rm=TRUE)
data[data$interval=="0",]
data[data$interval=="835",]
for (i in 1:288){xy[i] <- data[data$interval==data$interval[i],]}
xy
data.time <- NULL
for (i in 1:288){data.time[i] <- data[data$interval==data$interval[i],]}
head(data.time)
data[1+288*3,]
mean(data.time[!is.na(data.time)])
mean(data.time[!is.na(data.time),])
data[6+288*8,]
data[5+288*8,]
data[1+288*0,]
data[1+288*1,]
?tapply]
?tapply
class(data$interval)
data[2+288*1,]
data[2+288*10,]
data1 <- data
data1$interval <- as.factor(data)
data1$interval <- as.factor(data$itnerval)
data1$interval <- as.factor(data$interval)
mean.time <- tapply(data$steps, data$interval, mean)
mean.time
sum.time <- tapply(data$steps, data$interval, sum)
sum.time
sum.time <- tapply(data$steps, data$interval, mean, na.rm=TRUE)
sum.time
mean.time <- tapply(data1$steps, data1$interval, mean, na.rm=TRUE)
mean.time[1]
data1[data1$interval==0,])
data1[data1$interval==0,]$steps
sum(data1[data1$interval==0,]$steps, na.rm=TRUE)
91/1.716981
data1[which.max(tapply(data1$steps, data1$interval, mean, na.rm=TRUE),]$steps
data1[which.max(tapply(data1$steps, data1$interval, mean, na.rm=TRUE)),]$steps
time.means <- tapply(data1$steps, data1$interval, mean, na.rm=TRUE)
time.means
which.max(time.means)
data1[which.max(time.means),]$steps
data[which.max(time.means),]$steps
data[104,]
data[which.max(time.means),]$interval
nas <- is.na(data$steps)
length(nas)
nas <- NULL
nas <- data[is.na(data$steps),]$steps
length(nas)
head(data)
nas <- is.na(data$steps)
length(nas)
length(nas==TRUE)
length(nas==FALSE)
head(nas)
nas
length(nas[nas==TRUE])
length(nas[nas==!TRUE])
head(time.means)
data[nas==TRUE,]$steps <- time.means[grep(data[nas==TRUE,])]
grep(nas[nas==TRUE])
?grep
grep(data$steps, is.na(data$steps)==TRUE)
x
x[10] <- NA
x
grep(x==NA)
grep(x, x=="NA")
grep(x=="NA")
grep(x,"NA")
grep(x, x=="NA")
grep(NA, x)
grepl(NA, x)
x
grep("NA", x)
grep(x=="NA", x)
grepl(1, x)
grepl(NA, x)
grepl("NA", x)
x
grepl("NA", data)
grepl("NA", data$steps)
grep("NA", data)
grep("NA", data$steps)
grepl("[NA]", data)
grepl("[NA]", data$steps)
sum(data$steps, na.rm=TRUE)
head(grepl("NA", data$steps))
time.means["835"]
grep("NA", data$stesps)
grep("[NA]", data$stesps)
class(data$steps)
class(data$steps[1])
data$steps[1]
grep(data$steps[1], data$stesps)
grep(NA, data$steps)
which(is.na(data$steps))
length(nas)
data.n <- data
nas <- which(is.na(data$steps))
data.n[nas,]$steps <- time.means[as.character(data.n$interval)]
class(as.character(x[1]))
rm(data1)
rm(i)
rm(time)
rm(data.re)
rm(xy)
rm(time.mean)
rm(time.sms)
rm(time.sums)
for (i in nas) {data.n[i,]$steps <- time.means[as.character(data.n[i,]$interval]}
for (i in nas) {data.n[i,]$steps <- time.means[as.character(data.n[i,]$interval)]}
head(data.n)
head(time.means()
)
head(time.means)
tail(time.means)
tail(data.n)
which(is.na(data.n$steps))
data.no.nas <- data.n
rm(data.n)
for (i in levels(factor(data.no.nas$interval))){time.sums[i] <- sum(data.no.nas[data.no.nas$interval==i,]$steps)}
time.sums <- NULL
for (i in levels(factor(data.no.nas$interval))){time.sums[i] <- sum(data.no.nas[data.no.nas$interval==i,]$steps)}
time.sums
hist(time.sums)
c(data.no.nas[1:288,]$steps, time.means[[1:288]])
c(data.no.nas[1:288,]$steps, time.means[1:288])
hist(time.means)
str(time.sums)
sum(data.no.nas[data.no.nas$interval==0,]$steps)
time.sums[1:289]
hist(time.sums)
time.sums[which.max(time.sums)]
mean(time.sums)
median(time.sums)
day.sums.no.nas <- tapply(data.no.nas$steps, data.no.nas$date, sum)
?is.TRUE
is.true
?is.true
hist(day.sums.no.nas)
hist(day.sums)
length(factor(data$date))
length(levels(factor(data$date)))
summary(day.sums.no.nas)
str(dat.sums.no.nas)
str(day.sums.no.nas)
hist(day.sums.no.nas, breaks=10)
hist(day.sums.no.nas, breaks=8)
hist(day.sums.no.nas, breaks=7)
library(dplyr)
?mutate
library(lubridate)
?is.weekday
weekday("9/30/15")
weekdays("9/30/15")
weekdays(as.Date("9/30/15"))
weekdays(as.Date("9/30/15", "%m/%d/%Y"))
weekday <- weekdays(data.no.nas$date)
data.no.nas$date <- as.Date(data.no.nas$date, "%m/%d/%Y")
weekday <- weekdays(data.no.nas$date)
weekday[weekday==c("Saturday"|"Sunday")] <- "Weekend"
weekday[weekday!="Saturday"|"Sunday")] <- "Weekday"
weekday[weekday=="Saturday"] <- "Weekend"
weekday[weekday=="Sunday"] <- "Weekend"
weekday[weekday!="Sunday"& weekday!="Saturday"] <- "Weekend"
weekday[weekday!="Sunday"& weekday!="Saturday"] <- "Weekday"
data.no.nas$weekday <- weekday
head(data.no.nas)
head(weekday)
weekday <- weekdays(data.no.nas$date)
head(weekday)
class(data.no.nas$date)
weekdays(data.no.nas[1,]$date)
data.no.nas[1,]$date
head(data$date)
as.Date(data$date[1], "%Y/%d/%m")
as.Date(data$date[1], "%Y/%m/%d")
as.Date(data$date[1], "%Y-%m-%d")
factor(as.Date(data$date, "%Y-%m-%d"))
str(data.no.nas)
data.no.nas$date <- data$date
str(data.no.nas)
weekdays(data.no.nas[1,]$date)
class(data$date)
dates <- as.Date(data$date, "%Y-%m-%d")
class(dates)
data.no.nas$date <- dates
weekdays(data.no.nas[,1]$date
)
weekdays(data.no.nas[1,]$date)
1!=2
weekday <- weekdays(data.no.nas$date)
class(weekday)
weekday[1]
weekday[289]
weekday[weekday=="Saturday" | weekday=="Sunday"] <- "Weekend"
weekday[weekday!="Saturday" & weekday!="Sunday"] <- "Weekday"
str(weekday)
summary(weekday)
weekday[weekday=="Weekend"]
weekday[300, 600]
weekday[c(1,300,600,900,1100,1300, 1500, 1800, 2100)]
summary(weekdays(data$date))
summary(weekdays(dates))
weekday <- weekdays(data.no.nas$date)
summary(weekday)
str(weekday)
weekday[weekday=="Monday"] <- "monday"
str(weekday)
weekday[weekday!="monday"] <- "not monday"
summary(weekday)
length(weekday[weekday=="monday"])
length(weekday[weekday=="Tuesday"])
length(weekday[weekday=="not monday"])
weekday[weekday!="monday"] <- "unmonday"
str(weekday)
summarize(weekday)
levels(weekday)
grepl("monday", "Monday", weekdays)
grepl("monday", "Monday", weekday)
gsub("monday", "Monday", weekday)
weekdays <- weekdays(data.no.nas$date)
weekdays
gsub("Monday|Tuesday|Wednesday|Thursday|Friday", "Weekday", weekday)
weekday
weekdays
gsub("Monday|Tuesday|Wednesday|Thursday|Friday", "Weekday", weekdays)
gsub("Monday"|"Friday", "Weekday", weekdays)
gsub("[Monday|Friday]", "Weekday", weekdays)
weekdays <- weekdays(data.no.nas$date)
gsub("[Monday|Friday]", "Weekday", weekdays)
weekdays <- weekdays(data.no.nas$date)
gsub("Monday|Friday", "Weekday", weekdays)
gsub("Monday|Tuesday|Wednesday|Thursday|Friday", "Weekday", weekdays)
gsub("Saturday|Sunday", "Weekend", weekdays)
weekdays <- gsub("Saturday|Sunday", "Weekend", weekdays)
weekdays <- gsub("Monday|Tuesday|Wednesday|Thursday|Friday", "Weekday", weekdays)
head(weekdays)
str(weekdays)
weekday.sums <- tapply(data.no.nas$steps, data.no.nas$weekday, sum)
str(weekday.sums)
summary(weekday.sums)
weekday.sums <- tapply(data.no.nas$steps, factor(data.no.nas$weekday), sum)
weekday.sums <- tapply(data.no.nas$steps, factor(data.no.nas$weekday), sum)
summary(weekday.sums)
weekday.sums <- tapply(data.no.nas$steps, as.factor(data.no.nas$weekday), sum)
summary(weekday.sums)
head(weekday.sums)
data.no.nas$weekday <- factor(weekdays)
weekday.sums <- tapply(data.no.nas$steps, as.factor(data.no.nas$weekday), sum)
head(weekday.sums)
summary(weekday.sums)
head(weekday.sums)
weekday.sums
plot(weeday.sums~data.no.nas$interval, type="l")
plot(weekday.sums~data.no.nas$interval, type="l")
weekday.sums <- tapply(data.no.nas$steps, as.factor(data.no.nas$weekday), sum)
plot(weekday.sums~data.no.nas$interval, type="l")
weekday.sums <- tapply(data.no.nas$steps, data.no.nas$interval, sum)
weekday.sums <- tapply(data.no.nas[data.no.nas$weekday=="Weekday",]$steps, data.no.nas$interval, sum)
weekday.sums <- tapply(data.no.nas[data.no.nas$weekday=="Weekday",]$steps, data.no.nas[data.no.nas$weekday=="Weekday",]$interval, sum)
weekend.sums <- tapply(data.no.nas[data.no.nas$weekday=="Weekend",]$steps, data.no.nas[data.no.nas$weekday=="Weekend",]$interval, sum)
plot(weekday.sums~data.no.nas$interval, type="l")
plot(weekend.sums~data.no.nas$interval, type="l")
plot(weekend.sums~data.no.nas[data.no.nas$weekday=="Weekend",]$interval, type="l")
dim(weekend.sums)
plot(weekend.sums, type="l")
?par
par(mfrow=2)
par(mfrow=c(2,1)
)
plot(weekend.sums, type="l")
plot(weekday.sums, type="l")
library(ggplot2)
g <- ggplot(data.no.nas, aes(x=interval, y=steps)) + geom_line() + facet_grid(factor(data.no.nas$weekend)~.)
g
g <- ggplot(data.no.nas, aes(x=interval, y=steps)) + geom_line(steps) + facet_grid(factor(data.no.nas$weekend)~.)
g <- ggplot(data.no.nas, aes(x=interval, y=steps)) + geom_line(data.no.nas$steps) + facet_grid(factor(data.no.nas$weekend)~.)
g <- ggplot(data.no.nas, aes(x=interval, y=steps)) + geom_line(data.no.nas$steps)
g <- ggplot(data.no.nas, aes(x=interval, y=steps)) +
0
g <- ggplot(data.no.nas, aes(x=interval, y=steps))
g + geom_line()
g <- g + facet_grid(weekend~.)
g
g <- g + facet_grid(facotr(weekend)~.)
g
g + geom_line()
print(g)
names(data.no.nas
)
g <- g + facet_grid(facotr(weekday)~.)
g
g + geom_line()
g <- ggplot(data.no.nas, aes(x=interval, y=steps)) + geom_line() + facet_grid(data.no.nas$weekday~.)
g
g <- ggplot(data.no.nas, aes(x=interval, y=steps)) + geom_line() + facet_grid(weekday~.)
g
data.mean.time <- tapply(data.no.nas$steps, data.no.nas$interval, mean)
g <- ggplot(data.mean.time, aes(x=interval, y=steps)) + geom_line() + facet_grid(weekday~.)
g <- ggplot(data.frame(data.mean.time), aes(x=interval, y=steps)) + geom_line() + facet_grid(weekday~.)
g
head(data.mean.time)
data.mean.time <- data.frame(data.mean.time)
data.mean.time$int <- data.no.nas$interval
data.mean.time$int <- data.no.nas$interval[1:299]
data.mean.time$int <- data.no.nas$interval[1:288]
head(data.mean.time)
g <- ggplot(data.frame(data.mean.time), aes(x=interval, y=steps)) + geom_line() + facet_grid(weekday~.)
g
g <- ggplot(data.mean.time, aes(x=interval, y=steps)) + geom_line() + facet_grid(weekday~.)
names(data.mean.time)
names(data.mean.time) <- c("steps", "int")
head(data.mean.time$steps)
names(data.no.nas)
mean.days <- tapply(filter(data.no.nas, weekday=="Weekday"),data.no.nas$interval, mean)
days <- filter(data.no.nas, weekday=="Weekday")
ends <- fiter(data.no.nas, weekday=="Weekend")
ends <- filter(data.no.nas, weekday=="Weekend")
days.mean <- tapplY(days$steps, days$interval, mean)
days.mean <- tapply(days$steps, days$interval, mean)
ends.mean <- tapply(ends$steps, ends$interval, mean)
plot(days.mean)
plot(days.mean, type="l")
plot(ends.mean)
plot(ends.mean)
plot(days.mean, type="l")
plot(ends.mean, type="l")
?bzzip
?bzip
?bz2zip
?zip
getwd()
setwd(..)
setwd("..")
getwd()
setwd("/project2")
setwd("./project2")
getwd()
setwd("..")
setwd("project2")
getwd()
list.files()
bzip2("repdata-data-stromData.csv.bz2")
?bzip
?zip
stormy <- read.csv("repdata-data-stormData.csv.bz2")
names(stormy)
head(stormy)
p2 <- data.frame("type"=stormy$EVTYPE, "fatal"=stormy$FATALITIES, "inj"=stormy$INJURIES, "prop"=stormy$PROPDMG, "crop"=stormy$CROPDMG)
head(p2)
?by.group
?group.by
which.max(tapply(p2$fatal, p2$type, sum))
tapply(p2$fatal, p2$type, sum)
length(unique(p2$type))
which.max(tapply(p2$inj, p2$type, sum))
tapply(p2$fatal, p2$type, sum)[1:2]
data.frame(tapply(p2$fatal, p2$type, sum)[1:2])
data.frame(tapply(p2, p2$type, sum)[1:2])
?summarize
library(dplyr)
summarize(p2)
summarise(p2)
str(p2)
which.max(p2$fatal)
p2[198704,]
stormy$pop <- stormy$FATALITIES + stormy$INJURIES
names(stormy)
stormy$prop <- stormy$PROPDMG + stormy$CROPDMG
prop <- tapply(stormy$PROPDMG, stormy$EVTYPE, sum)
fatal <- tapply(stormy$fatal, stormy$EVTYPE, sum)
fatal <- tapply(stormy$FATALITIES, stormy$EVTYPE, sum)
inj <- tapply(stormy$INJURIES, stormy$EVTYPE, sum)
prop <- tapply(stormy$PROPDMG, stormy$EVTYPE, sum)
crop <- tapply(stormy$CROPDMG, stormy$EVTYPE, sum)
storm <- data.frame("fatal"=fatal, "inj"=inj, "pop"=pop, "prop"=prop)
storm <- data.frame("fatal"=fatal, "inj"=inj, "pop"=pop, "crop"=crop)
storm <- data.frame("fatal"=fatal, "inj"=inj, "prop"=prop, "crop"=crop)
summary(storm)
head(storm)
storm <- mutate(storm, pop = fatal+inj, econ = prop+crop)
head(storm)
factor(stormy$EVTYPE)
levels(stormy$EVTYPE)
?lapply
evs <- unique(stormy$EVTYPE)
dim(evs)
evs <- levels(stormy$EVTYPE)
dim(evs)
head(evs)
dim(evs)
grep("ICE", evs)
ice <- grep("ICE", evs)
snow <- greP("SNOW", evs)
snow <- grep("SNOW", evs)
head(p2)
levles(p2$type)
levesl(p2$type)
levels(p2$type)
factor(p2$type)
names(stormy)
names(ps)
names(p2)
p2$propexp <- stormy$PROPDMGEXP
p2$cropexp <- stormy$CROPDMGEXP
levles(p2$cropexp)
levels(p2$cropexp)
summary(p2$cropexp)
p2[p2$cropexp==2,]
stormy[221151,]
stormy[stormy$PROPDMGEXP==2,]
rm(p2)
rm(storm)
rm(crop)
rm(data.time)
rm(dates)
rm(day.sums)
we <- select(stormy, FATALITIES, INJURIES, PROPDMG, PROPDMGEXP, CROPDMG, CROPDMGEXP)
rm(day.sums.no.nas)
rm(days)
rm(ends)
names(we)
names(we) <- c("fatal", "inj", "pdmg", "cdmg", "pexp", "cexp")
names(we)
we$pop <- we$fatal + we$inj
we$prop <- NULL
names(we)
we$prop <- NA
names(we)
head(we)
summary(we$pexp)
levels(we$pexp)
levels(stormy$PROPDMGEXP)
summary(stormy$PROPDMGEXP)
list.files()
grepl("TORN", stormy$EVTYPE)
stormy[grep("TORN", stormy$EVTYPE),]$EVTYPE
unique(stormy[grep("TORN", stormy$EVTYPE),]$EVTYPE)
unique(stormy$EVTYPE)
arrange(tapply(stormy$FATALITIES, stormy$EVTYPE, sum))
sort(tapply(stormy$FATALITIES, stormy$EVTYPE, sum))
plot(tapply(stormy$FATALITIES, stormy$EVTYPE, sum))
grep("HOT|HEAT", we$type)
grep("HOT", we$type)
names(we)
?grep
grep("HOT|HEAT", stormy$EVTYPE)
length(grep("HOT|HEAT", stormy$EVTYPE))
length(grep("HOT", stormy$EVTYPE))
length(grep("HEAT", stormy$EVTYPE))
we$type <- stormy$EVTYPE
we[grep("TORN", we$type, ignore.case=TRUE),]$type <- "TORNADO"
we[grep("HOT|HEAT|", we$type, ignore.case=TRUE),]$type <- "HEAT"
we.no0 <- filter(we, fatal!=0 & inj!=0 & propdmg!=0 & cropdmg!=0)
names(we)
we.no0 <- filter(we, fatal!=0 & inj!=0 & pdmg!=0 & cdmg!=0)
we.no0[we.no0$fatal==0,]
dim(we.no0)
names(we.no0$type)
levels(we.no0$type)
we.no0[grep("TORN", we.no0$type, ignore.case=TRUE),]$type <- "TORNADO"
names(we.no0)
we.no0$type[1]
we[grep("HOT|HEAT|", we$type, ignore.case=TRUE),]$type <- "HEAT"
we.no0[grep("HOT|HEAT|", we.no0$type, ignore.case=TRUE),]$type <- "HEAT"
we.no0[grep("TORN", we.no0$type, ignore.case=TRUE),]$type <- "TORNADO"
grep("TORN", we.no0$type, ignore.case=TRUE)
grep("TORNado", we.no0$type, ignore.case=TRUE)
grep("TORNADO", we.no0$type, ignore.case=TRUE)
grep("HOT", we.no0$type, ignore.case=TRUE)
head(we.no0$type)
all(we.no$type=="HEAT")
all(we.no0$type=="HEAT")
